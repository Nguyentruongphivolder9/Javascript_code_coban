<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <ul id="comment"></ul>

    <script>
        const users = [
            {
                id: 1,
                name: "Phi",
            },
            {
                id: 2,
                name: "Hung",
            },
            {
                id: 3,
                name: "Thy",
            }
        ];

        const comments = [
            {
                id: 1,
                user_id: 1,
                content: "Oke friend :)))"
            },
            {
                id: 2,
                user_id: 3,
                content: "Hom nay dep trai qua!!"
            }
        ]

        function getUserByIds(userIds){
            return new Promise((resolve) => {
                var result = users.filter((user) => {
                    return userIds.includes(user.id);
                });
                setTimeout(() => {
                    resolve(result);
                }, 2000);
            });
        }

        function getComments(){
            return new Promise((resolve) => {
                setTimeout(() => {
                    resolve(comments);
                }, 1000);
            });
        }

        getComments()
            .then((comments) => {
                var userIds = comments.map((comment) => {
                    return comment.user_id
                });
                return getUserByIds(userIds)
                    .then((users) => {
                        return {
                            users: users,
                            comments: comments
                        };
                    });
            })
            .then((data) => {
                var commentList = document.getElementById('comment');

                var html = '';
                data.comments.forEach((comment) => {
                    var user = data.users.find(user => {
                        return user.id === comment.user_id;
                    });

                    html += `<li>${user.name}: ${comment.content}</li>`;
                });

                commentList.innerHTML = html;
            })


    </script>
</body>

</html>